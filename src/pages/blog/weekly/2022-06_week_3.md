---
title: "週報[2022-06-week-3]"
layout: "../../../layouts/BlogPost.astro"
description: ""
date: "2023-07-23"
count: 1449
tags:
 - weekly
---




### === テトリス書いてます！ ===

[2022-06-16]

[GitHub - wasuken/ts-tetris at dev](https://github.com/wasuken/ts-tetris/tree/dev)

# できてること

* ブロック移動
  * 左
  * 右
  * 下

手動かつバグとりができてない。

# できてないこと

* ブロック移動
  * 左
  * 右
  * 下
* 行消
* 複数色
* テトラミノランダム生成
* 時間(一秒ごとに落としたい)

# 学んだこと

```typescript
export type Rotate = 1 | 2 | 3 | 4;
```

1~4の型とかの定義できる。


あとはなるべくベースの関数,決めてそちら流れるように実装を心がけている。

rotate,moveBlock系は一応守れてる。


### === 他のテトリス実装を見てみる ===

[2022-06-19]


### === ブラウザで圧縮ファイルの中身を確認したい ===

[2022-06-19]

タイトルの通りなのでまずはローカルサービスとして書いていくぞ。

根本的には公開されているZipファイルを確認したかっただけなのでそこだけサポートするとすると

入力要件は下記となる。

* フロント: zipファイルのURLを入力する
* API: zipファイルのURLをパラメタとする
* 共通: ファイル種類はzipのみとする

描画自体は後でもよいのでAPIで再帰リストとして返却してくれればよい。

* API: ディレクトリ情報は再帰リストで返却
* フロント: ディレクトリツリーライブラリへレスポンスを入れる

とりあえずここまで書いてみる。

それ以降については上記ができてから考える。テトリスとか終わってないからね。

## 名前

compiew

## 実装機能

### ブラウジング(キャッシング->ブラウジングという流れ)

+ キャッシング
+ 外部サイトリンク経由でのダウンロード
+ 本サービス内部でダウンロード

### 部分操作

* 部分的にダウンロードする。
+ 改めてZip化等を行い、DL。

## インフラ

* backend: go
* frontend: typescript+react

開発/本番環境はDocker

# 開発一日目感想

一度フロントで完結するやつを作ろうとしたが、結果的にこれは以下の理由で大失敗だった。

* pakoというライブラリ(zlibのJS実装?)を利用したが、当然zipには非対応。

* gzファイルには当然対応しているが、ファイル名とかのパースはしてくれない。全部文字列で返却してくる。そのためパーサを書かないといけない。

上記に気がつくまで二時間ほどコード回してた。

諦めてバックエンドに飛ばそう...。


### === compiewフロントエンド開発 ===

[2022-06-20]

frontだけ書いた。

pakoでパースしているが、zipはパースできないようなので別ライブラリを利用する。

zlibjsかな。

全体の機能とか決めてないので見た目はまだシンプルなまま。


### === tetris ===

[2022-06-20]

[マップ移動周りのバグと左右移動実装 · wasuken/ts-tetris@2de19e4 · GitHub](https://github.com/wasuken/ts-tetris/commit/2de19e4ab5e439de939f01eec45d222f4c420456)

バグ修正とかこっそりやったくらい。

次あたりにやるかもしれないこと

* マップ上での回転
* 一番したへ落ちた判定
* 一番したに落ちた後の処理(再配置、終了判定等)
